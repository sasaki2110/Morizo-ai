# レシピ検索統合の現状分析

## 現状のレシピ検索機能

### 1. Web検索機能（Perplexity API）
- **実装**: `search_recipe_from_web` (recipe_mcp_server_stdio.py:475-560)
- **機能**: Perplexity APIを使用したWeb検索
- **結果**: レシピタイトル、URL、ソース、材料、調理時間、分量
- **状態**: ✅ 実装完了・動作確認済み

### 2. RAG検索機能（ベクトルDB）
- **実装**: `search_recipe_from_rag` (recipe_mcp_server_stdio.py:321-473)
- **機能**: ベクトルDBを使用した類似レシピ検索
- **結果**: 類似度スコア、レシピタイトル、材料、調理手順
- **状態**: ✅ 実装完了・動作確認済み

## 現在の問題点

### 1. 個別動作
- RAG検索とWeb検索が個別に動作
- 統合された結果の提供ができない
- 最適なレシピ選択ができない

### 2. 結果の統合・ランキング機能が未実装
- 複数の検索結果を統合する機能がない
- 結果の優先順位付けができない
- ユーザーの好みに応じた選択ができない

## 改善提案

### 1. 統合検索機能の実装
- RAG検索とWeb検索を組み合わせた統合検索
- 結果の重複除去と統合
- 統合結果のランキング

### 2. 結果の統合・ランキング機能
- 類似度スコアとWeb検索結果の統合
- ユーザーの好みに応じた重み付け
- 最適なレシピ選択アルゴリズム

### 3. 統合結果の表示
- 統合された結果の一覧表示
- ソース別の結果表示
- 推奨度の表示